<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Places Search Box</title>
    <style type="text/css">
    	     /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 60%;
        width: 100%;
        border-radius: 20px;
        border: 2px dashed black;
        display: inline-block;
      }
      
       /* Optional: Makes the sample page fill the window. */
      html, body {
        text-align: center;  
        height: 100%;
      }
    </style>
  </head>
  <body>
	<h1>result list</h1>
	<h2>Nearby&nbsp<%=sValue%></h2>
		<%buildings.forEach((building)=>{%>
			<%building.utilities.forEach((utility)=>{%>
				<%if(utility.type === sValue){%>
					<p><%=building.name%>&nbspDescription:<%=utility.description%>
				<%}%>
			<%})%>
		<%})%>

    <div id="map"></div>
    <script
      src="https://code.jquery.com/jquery-3.3.1.min.js"
      integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
      crossorigin="anonymous"></script>
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCSSHKMu675X0qLQXWpDJBSGoFr8iVRxsA&callback=initMap">
    </script>
    <script type="text/javascript">
	     function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 16,
          center: new google.maps.LatLng(43.076592, -89.4124875),
          mapTypeId: 'roadmap'
        });

        var iconBase = 'https://maps.google.com/mapfiles/kml/shapes/';
        var icons = {
          info: {
            icon: iconBase + 'info-i_maps.png'
          }
        };

        let lng

      //  $.ajax({
      //     url: 'http://localhost:8080/USWISCUWMAD',
      //     type: 'GET',
      //     crossDomain: true,
      //     dataType: 'jsonp',
      //     success: function(data) {
      //       var buildings = data.foundBuildings
      //       console.log(data)
      //       buildings.forEach((building)=>{
      //         var marker = new google.maps.Marker({
      //         position: new google.maps.LatLng(building.lat, building.lng),
      //         icon: icons['info'].icon,
      //         map: map
      //       });    
      //       })
      //     },
      //     error: function() { alert('Failed!'); }
      // });
         
        // Create markers.
        // features.forEach(function(feature) {
        //   var marker = new google.maps.Marker({
        //     position: feature.position,
        //     icon: icons[feature.type].icon,
        //     map: map
        //   });
        // });
      }

  // let g
  // function getLocation() {
  //     if (navigator.geolocation) {
  //         navigator.geolocation.getCurrentPosition((position)=>{
  //           //console.log("lat:" + position.coords.latitude + " lng:"+ position.coords.longitude)
  //           g = position.coords
  //         });
  //     } else { 
  //         console.log("Geolocation is not supported by this browser.");
  //     }
  // }


  // getLocation();
</script>
  </body>
</html>
